{% comment %}
*   
*   This include creates the list of the documentation pages with the given attributes.
*   Arguments:
*     helpCollection: The documentation collection to display, e.g., helpV1.0.0 in directory _helpV1.0.0.
*     helpType: "admin" or "user" to control pages filtered/shown.
*     helpCategory: The type of documentation pages filter/show.
*     helpPage: true if being placed on a documentation page and otherwise not so likely for page listing.
*
*   Example: {% include list-help helpCollection="helpV1.0.0" helpType="admin" helpCategory="Graphing" helpPage=true %}
*   
{% endcomment %}

{% comment %}
Assign local variables from parameters and sort pages by title.
{% endcomment%}
{% assign helpCollection = include.helpCollection %}
{% assign helpType = include.helpType %}
{% assign helpCategory = include.helpCategory %}
{% assign helpPage = include.helpPage %}
{% assign sortedPages = site[helpCollection]  | sort_natural: "title" %}

<div style="padding-left: 1em;">
  <h6>{{helpCategory}}</h6>
  <div style="padding-left: 1em;">
    {% for pageInCollection in sortedPages %}
      <!-- Cannot nest if with for so do for every page but ignored if not a link to show. 
          This adds a description if it is the documentation page (vs documentation sidebar).
          It will be an empty string if not a documentation page true. -->
      {% if helpPage == true %}
        {% assign helpDescription = ": " | append: pageInCollection.helpDescription %}
      {% endif %}
      {% if pageInCollection.published != false and pageInCollection.helpType == helpType and pageInCollection.helpCategory == helpCategory %}
        &nbsp;&nbsp;<a href="{{ site.url }}{{ pageInCollection.url }}">{{ pageInCollection.title }}</a>{{ helpDescription }}</br>
      {% endif %}
    {% endfor %}
  </div>
</div>
