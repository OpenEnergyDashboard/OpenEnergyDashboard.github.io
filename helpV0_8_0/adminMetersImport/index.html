<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Meter Import Doc</title><link rel="stylesheet" type="text/css" href="https://openenergydashboard.org/assets/css/styles_feeling_responsive.css"> <script src="https://openenergydashboard.org/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <noscript><link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'> </noscript><meta name="description" content="Version V0.8.0 The latest version of this page is V1.0.0. Documentation overview Admin documentation Information Overview Site Management Group Map Management Map Viewing Meter Viewing Site Settings User Data Acquisition CSV Import Data Acquisition MAMAC Meter Import Reading Import Site Installation Production Install Output Installation Directions Upgrades User documentation User help Documentation versions for this page V1.0.0 V0.8.0 (current page) V0.7.0 These features are only available to select people who oversee the OED site (called admins) so this information is not usually of interest to a general user. Overview This page describes the process of importing meters into OED via a CSV file. See the general CSV import page for an overview and information common to all CSV imports. Usage The information needed to upload meters is the same whether done via the web page or direct file upload. The web page looks as follows: Required and optional information The user name and password is required in the direct file upload as described on the general CSV import page. It is automatically provided on the web page upload since you are logged in. CSV file (&quot;Choose File&quot; button on web page; csvFile parameter on direct file upload): This gives the location of the CSV file containing the meter information. On the web page it is via a file picker popup. See below on the file format. Is CSV file in gzip format (&quot;Gzip&quot; checked if true on web page; gzip parameter on direct file upload): Note this is the Gnu zip format and not a standard .zip file format. The default value is true. Note that gzip files are smaller in size for upload and also have internal validation to protect against corruption so they are preferred. Does CSV have a header row (&quot;Header Row&quot; checked if true on web page; headerRow parameter on direct file upload): Is the first row of the CSV file header information and not an actual meter (see below for format). The default value is false. Is this an update (&quot;Update&quot; checked if true on web page; update parameter on direct file upload): Each row is new information for the meter so it will be update with any provided values and others are left as currently set. The default value is false. Meter name (&quot;Meter name&quot; input box on web page; meterName parameter on direct file upload): This is only used if you want to change the name of a meter (not identifier). The meter name provided is used as the name to update and the meter name value in the CSV is used as the new name. Note you can only update a single meter name at a time meaning that the CSV can only have one row of meter information. Meter CSV file format If the file has a header row then it should be: name,ipaddress,enabled,displayable,type,timezone,gps,identifier,note,area,cumulative,reset,reset start,reset end,gap,variation,duplicates,timesort,end only,reading,start time,end time More information on the first set of columns/values are described on the admin meter viewing page and the later ones are the meter defaults for reading input and described on the admin reading import page. Each following line should contain the values for one meter. Most values can be skipped where the default value for OED will be used. A brief description of each value is in the following table: Meter value Description Default value name The internal name of a meter none, must be provided and unique ipaddress The IP address to pull data from some meters none but optional enabled True if OED will automatically acquire meter data (if possible) None, must be true or false displayable Can users see this meter and its data None, must be true or false type The type of meter data, other is used for ones not listed none, must be mamac, metasys, obvius or other timezone The timezone of this meter as text. OED can accept most standard time zone names such as this Wikipedia one where the &quot;TZ database name&quot; is used, e.g., Pacific/Galapagos for the GalÃ¡pagos Islands none gps The GPS coordinates of this meter input as latitude, longitude pair (without parentheses or quotes but separated by a comma) none identifier The name shown users for this meter none, must be provided and unique note Information admins want to store about this meter empty area The area associated with this meter none cumulative true if reading are treated as cumulative for this meter false reset true if the cumulative readings reset to zero at times false reset start The earliest time of each day that cumulative reset can occur 00:00:00, meaning it can start at any time during the day reset end The latest time of each day that cumulative reset can occur 23:59:59.999999, meaning it can end at any time during the day gap How many seconds are considered normal between the end of one reading and the start of the next reading 0.0 variation How may seconds the length of one reading can vary for the length of the next reading 0.0 duplicates How many times a reading will occur in a row where 1 means no duplicates (the most common) 1 timesort increasing if readings are supplied so later ones are later in time and decreasing if reverse increasing end only true if each reading only has an end date/time stamp and no start time stamp false reading The value of the last reading seen by this meter and normally set by OED automatically 0.0 start time The start date/time stamp of the last reading seen by this meter and normally set by OED automatically 1970-01-01 00:00:00 end time The end date/time stamp of the last reading seen by this meter and normally set by OED automatically 1970-01-01 00:00:00 Sample file Below are the lines for a CSV meter import file with a header row. It will import two meters (Meter 1 and Meter 2) where the meters are not enabled but are displayable. Please note that &quot;1.2, -3.4&quot; is a pair of values separated by a comma that would be in a single column of the CSV file and input without the quotes, i.e., 1.2, -3.4. The quotes are added when such a CSV is saved to make it clear that the comma is not a new column. Most values that are optional and unspecified so the default values are used. This meters.csv was loaded using the curl command of: curl https://myoedserver.come:3000/api/csv/meters -X POST -F &#39;headerRow=true&#39; -F &#39;gzip=false&#39; -F &#39;email=csvuser@myorg.com&#39; -F &#39;password=csvuserpassword&#39; -F &#39;csvfile=@meters.csv&#39; assuming the shown URL, user email and password. (See admin reading sample files for more information on URL, email and password.) You need to reload the OED web page so your browser is aware of the new meters but you will get an empty graphic if used since they don&#39;t have any data. name,ipaddress,enabled,displayable,type,timezone,gps,identifier,note,area,cumulative,reset,reset start,reset end,gap,variation,duplicates,timesort,end only,reading,start time,end time Meter 1,,FALSE,TRUE,other,,,Student Dorm,This dorm has 20 students,13418,,,,,,,,,,,, Meter 2,,FALSE,TRUE,other,America/Halifax,&quot;1.2, -3.4&quot;,Athletic facility,,,,,,,,,,,,,, Return messages What follows are the common messages returned from a meter upload along with their meaning: &amp;lt;h1&amp;gt;FAILURE&amp;lt;/h1&amp;gt;CSVPipelineError: Failed to upload meters due to internal OED Error: Meter name of pipe41 seems to exist when inserting new meters and got DB error of: duplicate key value violates unique constraint &quot;meters_name_key&quot; This normally happens when the name (or similarly identifier) of the meter already exists. It may be the case that you wanted to update this meter but did not specify this. &amp;lt;h1&amp;gt;FAILURE&amp;lt;/h1&amp;gt;CSVPipelineError: Failed to upload meters due to internal OED Error: Meter name of pipe42 does not seem to exist with update for meters and got DB error of: No data returned from the query. Request indicated to update meter(s) but at least one did not exist. All meters must exist on update. &amp;lt;h1&amp;gt;SUCCESS&amp;lt;/h1&amp;gt;Successfully inserted the meters.&amp;lt;h1&amp;gt;FAILURE&amp;lt;/h1&amp;gt;CSVPipelineError: Failed to upload meters due to internal OED Error: Meter name provided (pipe40) in request with update for meters but more than one meter in CSV so not processing When you want to change a meter name you specify the name in the request as well as the CSV file. It then uses the name in the request to find the meter and the value in the CSV as the new meter name. However, you can only have a single meter in the CSV file for this to work. This indicates more than one meter was provided. You can get a variety of error messages if the gzip is improperly set. These include &quot;TypeError&quot;, &quot;invalid message format&quot; and others. This is because OED is incorrectly reading the CSV file and receives garbled information. Details Note that for efficiency reasons and because it is uncommon for the meters to change, OED does not automatically recheck for new meters when doing graphing. If you add new meters, there are two ways to get them to be available for graphing: You can visit the Meters viewing page if logged in as an admin. This page works directly with meter information and it does recheck for updates. Once this is done, any new meters will also be available for graphing. This is the fastest/easiest way to do this. You can refresh the web browser page with OED. This will cause it to return to the initial state with updated information. However, you will lose all unsaved changes along with any selected meters/graphics meaning you are restarting from scratch. This is probably only desireable if someone who is not an admin needs to see the meter changes right away."><meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ"><meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" ><link rel="canonical" href="https://openenergydashboard.org/helpV0_8_0/adminMetersImport/"><meta property="og:title" content="Meter Import Doc"><meta property="og:description" content="Version V0.8.0 The latest version of this page is V1.0.0. Documentation overview Admin documentation Information Overview Site Management Group Map Management Map Viewing Meter Viewing Site Settings User Data Acquisition CSV Import Data Acquisition MAMAC Meter Import Reading Import Site Installation Production Install Output Installation Directions Upgrades User documentation User help Documentation versions for this page V1.0.0 V0.8.0 (current page) V0.7.0 These features are only available to select people who oversee the OED site (called admins) so this information is not usually of interest to a general user. Overview This page describes the process of importing meters into OED via a CSV file. See the general CSV import page for an overview and information common to all CSV imports. Usage The information needed to upload meters is the same whether done via the web page or direct file upload. The web page looks as follows: Required and optional information The user name and password is required in the direct file upload as described on the general CSV import page. It is automatically provided on the web page upload since you are logged in. CSV file (&quot;Choose File&quot; button on web page; csvFile parameter on direct file upload): This gives the location of the CSV file containing the meter information. On the web page it is via a file picker popup. See below on the file format. Is CSV file in gzip format (&quot;Gzip&quot; checked if true on web page; gzip parameter on direct file upload): Note this is the Gnu zip format and not a standard .zip file format. The default value is true. Note that gzip files are smaller in size for upload and also have internal validation to protect against corruption so they are preferred. Does CSV have a header row (&quot;Header Row&quot; checked if true on web page; headerRow parameter on direct file upload): Is the first row of the CSV file header information and not an actual meter (see below for format). The default value is false. Is this an update (&quot;Update&quot; checked if true on web page; update parameter on direct file upload): Each row is new information for the meter so it will be update with any provided values and others are left as currently set. The default value is false. Meter name (&quot;Meter name&quot; input box on web page; meterName parameter on direct file upload): This is only used if you want to change the name of a meter (not identifier). The meter name provided is used as the name to update and the meter name value in the CSV is used as the new name. Note you can only update a single meter name at a time meaning that the CSV can only have one row of meter information. Meter CSV file format If the file has a header row then it should be: name,ipaddress,enabled,displayable,type,timezone,gps,identifier,note,area,cumulative,reset,reset start,reset end,gap,variation,duplicates,timesort,end only,reading,start time,end time More information on the first set of columns/values are described on the admin meter viewing page and the later ones are the meter defaults for reading input and described on the admin reading import page. Each following line should contain the values for one meter. Most values can be skipped where the default value for OED will be used. A brief description of each value is in the following table: Meter value Description Default value name The internal name of a meter none, must be provided and unique ipaddress The IP address to pull data from some meters none but optional enabled True if OED will automatically acquire meter data (if possible) None, must be true or false displayable Can users see this meter and its data None, must be true or false type The type of meter data, other is used for ones not listed none, must be mamac, metasys, obvius or other timezone The timezone of this meter as text. OED can accept most standard time zone names such as this Wikipedia one where the &quot;TZ database name&quot; is used, e.g., Pacific/Galapagos for the GalÃ¡pagos Islands none gps The GPS coordinates of this meter input as latitude, longitude pair (without parentheses or quotes but separated by a comma) none identifier The name shown users for this meter none, must be provided and unique note Information admins want to store about this meter empty area The area associated with this meter none cumulative true if reading are treated as cumulative for this meter false reset true if the cumulative readings reset to zero at times false reset start The earliest time of each day that cumulative reset can occur 00:00:00, meaning it can start at any time during the day reset end The latest time of each day that cumulative reset can occur 23:59:59.999999, meaning it can end at any time during the day gap How many seconds are considered normal between the end of one reading and the start of the next reading 0.0 variation How may seconds the length of one reading can vary for the length of the next reading 0.0 duplicates How many times a reading will occur in a row where 1 means no duplicates (the most common) 1 timesort increasing if readings are supplied so later ones are later in time and decreasing if reverse increasing end only true if each reading only has an end date/time stamp and no start time stamp false reading The value of the last reading seen by this meter and normally set by OED automatically 0.0 start time The start date/time stamp of the last reading seen by this meter and normally set by OED automatically 1970-01-01 00:00:00 end time The end date/time stamp of the last reading seen by this meter and normally set by OED automatically 1970-01-01 00:00:00 Sample file Below are the lines for a CSV meter import file with a header row. It will import two meters (Meter 1 and Meter 2) where the meters are not enabled but are displayable. Please note that &quot;1.2, -3.4&quot; is a pair of values separated by a comma that would be in a single column of the CSV file and input without the quotes, i.e., 1.2, -3.4. The quotes are added when such a CSV is saved to make it clear that the comma is not a new column. Most values that are optional and unspecified so the default values are used. This meters.csv was loaded using the curl command of: curl https://myoedserver.come:3000/api/csv/meters -X POST -F &#39;headerRow=true&#39; -F &#39;gzip=false&#39; -F &#39;email=csvuser@myorg.com&#39; -F &#39;password=csvuserpassword&#39; -F &#39;csvfile=@meters.csv&#39; assuming the shown URL, user email and password. (See admin reading sample files for more information on URL, email and password.) You need to reload the OED web page so your browser is aware of the new meters but you will get an empty graphic if used since they don&#39;t have any data. name,ipaddress,enabled,displayable,type,timezone,gps,identifier,note,area,cumulative,reset,reset start,reset end,gap,variation,duplicates,timesort,end only,reading,start time,end time Meter 1,,FALSE,TRUE,other,,,Student Dorm,This dorm has 20 students,13418,,,,,,,,,,,, Meter 2,,FALSE,TRUE,other,America/Halifax,&quot;1.2, -3.4&quot;,Athletic facility,,,,,,,,,,,,,, Return messages What follows are the common messages returned from a meter upload along with their meaning: &amp;lt;h1&amp;gt;FAILURE&amp;lt;/h1&amp;gt;CSVPipelineError: Failed to upload meters due to internal OED Error: Meter name of pipe41 seems to exist when inserting new meters and got DB error of: duplicate key value violates unique constraint &quot;meters_name_key&quot; This normally happens when the name (or similarly identifier) of the meter already exists. It may be the case that you wanted to update this meter but did not specify this. &amp;lt;h1&amp;gt;FAILURE&amp;lt;/h1&amp;gt;CSVPipelineError: Failed to upload meters due to internal OED Error: Meter name of pipe42 does not seem to exist with update for meters and got DB error of: No data returned from the query. Request indicated to update meter(s) but at least one did not exist. All meters must exist on update. &amp;lt;h1&amp;gt;SUCCESS&amp;lt;/h1&amp;gt;Successfully inserted the meters.&amp;lt;h1&amp;gt;FAILURE&amp;lt;/h1&amp;gt;CSVPipelineError: Failed to upload meters due to internal OED Error: Meter name provided (pipe40) in request with update for meters but more than one meter in CSV so not processing When you want to change a meter name you specify the name in the request as well as the CSV file. It then uses the name in the request to find the meter and the value in the CSV as the new meter name. However, you can only have a single meter in the CSV file for this to work. This indicates more than one meter was provided. You can get a variety of error messages if the gzip is improperly set. These include &quot;TypeError&quot;, &quot;invalid message format&quot; and others. This is because OED is incorrectly reading the CSV file and receives garbled information. Details Note that for efficiency reasons and because it is uncommon for the meters to change, OED does not automatically recheck for new meters when doing graphing. If you add new meters, there are two ways to get them to be available for graphing: You can visit the Meters viewing page if logged in as an admin. This page works directly with meter information and it does recheck for updates. Once this is done, any new meters will also be available for graphing. This is the fastest/easiest way to do this. You can refresh the web browser page with OED. This will cause it to return to the initial state with updated information. However, you will lose all unsaved changes along with any selected meters/graphics meaning you are restarting from scratch. This is probably only desireable if someone who is not an admin needs to see the meter changes right away."><meta property="og:url" content="https://openenergydashboard.org/helpV0_8_0/adminMetersImport/"><meta property="og:locale" content="en_EN"><meta property="og:type" content="website"><meta property="og:site_name" content="Open Energy Dashboard"><link rel="icon" sizes="32x32" href="https://openenergydashboard.org/assets/img/OEDIcon22x32.png"><link rel="icon" sizes="192x192" href="https://openenergydashboard.org/assets/img/OEDIcon192x274.png"><body id="top-of-page" class="page-fullwidth"><div id="navigation" class="sticky"><nav class="top-bar" role="navigation" data-topbar data-options="scrolltop: false"><ul class="title-area"><li class="name"><h1 class="hide-for-large-up"><a href="https://openenergydashboard.org/" class="icon-tree"> Open Energy Dashboard</a></h1><li class="toggle-topbar toggle-topbar-click menu-icon"><a><span>Nav</span></a></ul><section class="top-bar-section"><ul class="left"><li><a href="https://openenergydashboard.org/">home</a><li class="divider"><li class="has-dropdown"> <a href="https://openenergydashboard.org/features/">features</a><ul class="dropdown"><li><a href="https://openenergydashboard.org/features/">features by type</a><li><a href="https://openenergydashboard.org/useAcademic/">features by academic use</a></ul><li class="divider"><li class="has-dropdown"> <a href="https://openenergydashboard.org/helpV1_0_0/user/">Documentation</a><ul class="dropdown"><li><a href="https://openenergydashboard.org/helpV1_0_0/user/">oed version 1.0.0</a><li><a href="https://openenergydashboard.org/helpV0_8_0/user/">oed version 0.8.0</a><li><a href="https://openenergydashboard.org/helpV0_7_0/user/">oed version 0.7.0</a><li><a href="https://openenergydashboard.org/helpV0_6_0/user/">oed version 0.6.0</a></ul><li class="divider"><li><a href="https://openenergydashboard.org/use/">Adopting</a><li class="divider"><li class="has-dropdown"> <a href="https://openenergydashboard.org/news/">info</a><ul class="dropdown"><li><a href="https://openenergydashboard.org/news/">news</a><li><a href="https://openenergydashboard.org/principles/">project principles</a><li><a href="https://openenergydashboard.org/free/">free &amp; maintained</a><li><a href="https://openenergydashboard.org/mission/">mission</a><li><a href="https://openenergydashboard.org/why/">why exists</a><li><a href="https://openenergydashboard.org/projectInfo/">project information pages &amp; license</a><li><a href="https://openenergydashboard.org/name/">why OED name, logo &amp; some history</a></ul><li class="divider"></ul><ul class="right"><li class="divider"><li><a href="https://openenergydashboard.org/search/">Search</a><li class="divider"><li><a href="https://openenergydashboard.org/contact/">Contact</a><li class="divider"><li><a href="https://openenergydashboard.org/developer/developer/">developer docs</a><li class="divider"><li class="has-dropdown"> <a href="https://openenergydashboard.org/involved/">get involved</a><ul class="dropdown"><li><a href="https://openenergydashboard.org/internship/">becoming a developer</a><li><a href="https://openenergydashboard.org/studentExperience/">student experience</a></ul></ul></section></nav></div><div id="masthead-no-image-header"><div class="row"><div class="small-6 small-centered columns"> <a id="logo" title="Open Energy Dashboard â A Free, Open Source Energy/Resource Dashboard"> <img src="https://openenergydashboard.org/assets/img/logoHelp.png" alt="Open Energy Dashboard â A Free, Open Source Energy/Resource Dashboard"> </a></div></div></div><nav class="breadcrumbs" role="menubar" aria-label="breadcrumbs"> <a href="https://openenergydashboard.org/">Start</a> <a href="https://openenergydashboard.org/helpV0_8_0/">helpV0_8_0</a> <a class="current">Meter Import</a></nav><div class="row t15"><div class="medium-12 columns"><article><header><p class="subheadline">OED Documentation<h1>Meter Import</h1></header><div class="row"><p>Version V0.8.0<div class="alert-box info "><p>The latest version of this page is <a href="https://openenergydashboard.org/helpV1_0_0/adminMetersImport/">V1.0.0</a>.</div><div class="medium-4 medium-push-8 columns" markdown="1"><div class="panel radius" markdown="1"><div style="list-style: none;" class="side-nav"><h4><a href='../admin/'>Documentation overview</a></h4><div><h5>Admin documentation</h5><div style="padding-left: 1em;"><h6>Information</h6><div style="padding-left: 1em;"> <a href="https://openenergydashboard.org/helpV0_8_0/admin/">Overview</a></br></div></div><div style="padding-left: 1em;"><h6>Site Management</h6><div style="padding-left: 1em;"> <a href="https://openenergydashboard.org/helpV0_8_0/adminGroupViewing/">Group</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminMap/">Map Management</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminMapViewing/">Map Viewing</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminMeterViewing/">Meter Viewing</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminPreferences/">Site Settings</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminUser/">User</a></br></div></div><div style="padding-left: 1em;"><h6>Data Acquisition</h6><div style="padding-left: 1em;"> <a href="https://openenergydashboard.org/helpV0_8_0/adminCsvImport/">CSV Import</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminDataAcquisition/">Data Acquisition</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminMamac/">MAMAC</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminMetersImport/">Meter Import</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminReadingsImport/">Reading Import</a></br></div></div><div style="padding-left: 1em;"><h6>Site Installation</h6><div style="padding-left: 1em;"> <a href="https://openenergydashboard.org/helpV0_8_0/adminInstallOutput/">Production Install Output</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminInstallation/">Installation Directions</a></br> <a href="https://openenergydashboard.org/helpV0_8_0/adminUpgrading/">Upgrades</a></br></div></div><h5>User documentation</h5><div style="padding-left: 1em;"> <a href="https://openenergydashboard.org/helpV0_8_0/adminMetersImport/../user/">User help</a></br></div><h5>Documentation versions for this page</h5><div style="padding-left: 1em;"> <a href="../../helpV1_0_0/adminMetersImport/">V1.0.0</a></br> V0.8.0 (current page)</br> <a href="../../helpV0_7_0/adminMetersImport/">V0.7.0</a></br></div></div></div></div></div><div class="medium-8 medium-pull-4 columns" markdown="1"><div class="alert-box info "><p>These features are only available to select people who oversee the OED site (called admins) so this information is not usually of interest to a general user.</div><h2 id="overview">Overview</h2><p>This page describes the process of importing meters into OED via a CSV file. See the <a href="../adminCsvImport/">general CSV import</a> page for an overview and information common to all CSV imports.<h2 id="usage">Usage</h2><p>The information needed to upload meters is the same whether done via the web page or direct file upload. The web page looks as follows: <img alt="admin CSV meter page" src="../images/OEDAdminMeterCSV.png"><p><h3>Required and optional information</h3><ul><li>The user name and password is required in the direct file upload as described on the <a href="../adminCsvImport/">general CSV import</a> page. It is automatically provided on the web page upload since you are logged in.<li><i>CSV file ("Choose File" button on web page; <code>csvFile</code> parameter on direct file upload)</i>: This gives the location of the CSV file containing the meter information. On the web page it is via a file picker popup. See below on the file format.<li><i>Is CSV file in gzip format ("Gzip" checked if true on web page; <code>gzip</code> parameter on direct file upload)</i>: Note this is the Gnu zip format and not a standard .zip file format. The default value is true. Note that gzip files are smaller in size for upload and also have internal validation to protect against corruption so they are preferred.<li><i>Does CSV have a header row ("Header Row" checked if true on web page; <code>headerRow</code> parameter on direct file upload)</i>: Is the first row of the CSV file header information and not an actual meter (see below for format). The default value is false.<li><i>Is this an update ("Update" checked if true on web page; <code>update</code> parameter on direct file upload)</i>: Each row is new information for the meter so it will be update with any provided values and others are left as currently set. The default value is false.<li><i>Meter name ("Meter name" input box on web page; <code>meterName</code> parameter on direct file upload)</i>: This is only used if you want to change the name of a meter (not identifier). The meter name provided is used as the name to update and the meter name value in the CSV is used as the new name. Note you can only update a single meter name at a time meaning that the CSV can only have one row of meter information.</ul><h3>Meter CSV file format</h3><p>If the file has a header row then it should be:<br> name,ipaddress,enabled,displayable,type,timezone,gps,identifier,note,area,cumulative,reset,reset start,reset end,gap,variation,duplicates,timesort,end only,reading,start time,end time<br> More information on the first set of columns/values are described on the <a href="../adminMeterViewing/">admin meter viewing</a> page and the later ones are the meter defaults for reading input and described on the <a href="../adminReadingsImport/">admin reading import</a> page.<br> Each following line should contain the values for one meter. Most values can be skipped where the default value for OED will be used. A brief description of each value is in the following table:<table><thead><tr><th>Meter value<th>Description<th>Default value<tbody><tr><td>name<td>The internal name of a meter<td>none, must be provided and unique<tr><td>ipaddress<td>The IP address to pull data from some meters<td>none but optional<tr><td>enabled<td>True if OED will automatically acquire meter data (if possible)<td>None, must be true or false<tr><td>displayable<td>Can users see this meter and its data<td>None, must be true or false<tr><td>type<td>The type of meter data, other is used for ones not listed<td>none, must be mamac, metasys, obvius or other<tr><td>timezone<td>The timezone of this meter as text. OED can accept most standard time zone names such as <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" rel="noopener noreferrer">this Wikipedia one</a> where the "TZ database name" is used, e.g., Pacific/Galapagos for the GalÃ¡pagos Islands<td>none<tr><td>gps<td>The GPS coordinates of this meter input as latitude, longitude pair (without parentheses or quotes but separated by a comma)<td>none<tr><td>identifier<td>The name shown users for this meter<td>none, must be provided and unique<tr><td>note<td>Information admins want to store about this meter<td>empty<tr><td>area<td>The area associated with this meter<td>none<tr><td>cumulative<td>true if reading are treated as cumulative for this meter<td>false<tr><td>reset<td>true if the cumulative readings reset to zero at times<td>false<tr><td>reset start<td>The earliest time of each day that cumulative reset can occur<td>00:00:00, meaning it can start at any time during the day<tr><td>reset end<td>The latest time of each day that cumulative reset can occur<td>23:59:59.999999, meaning it can end at any time during the day<tr><td>gap<td>How many seconds are considered normal between the end of one reading and the start of the next reading<td>0.0<tr><td>variation<td>How may seconds the length of one reading can vary for the length of the next reading<td>0.0<tr><td>duplicates<td>How many times a reading will occur in a row where 1 means no duplicates (the most common)<td>1<tr><td>timesort<td>increasing if readings are supplied so later ones are later in time and decreasing if reverse<td>increasing<tr><td>end only<td>true if each reading only has an end date/time stamp and no start time stamp<td>false<tr><td>reading<td>The value of the last reading seen by this meter and normally set by OED automatically<td>0.0<tr><td>start time<td>The start date/time stamp of the last reading seen by this meter and normally set by OED automatically<td>1970-01-01 00:00:00<tr><td>end time<td>The end date/time stamp of the last reading seen by this meter and normally set by OED automatically<td>1970-01-01 00:00:00</table><h3>Sample file</h3><p>Below are the lines for a CSV meter import file with a header row. It will import two meters (Meter 1 and Meter 2) where the meters are not enabled but are displayable. Please note that "1.2, -3.4" is a pair of values separated by a comma that would be in a single column of the CSV file and input without the quotes, i.e., 1.2, -3.4. The quotes are added when such a CSV is saved to make it clear that the comma is not a new column. Most values that are optional and unspecified so the default values are used. This <a href="../files/meters.csv" download>meters.csv</a> was loaded using the curl command of:<br> <code>curl https://myoedserver.come:3000/api/csv/meters -X POST -F 'headerRow=true' -F 'gzip=false' -F 'email=csvuser@myorg.com' -F 'password=csvuserpassword' -F 'csvfile=@meters.csv'</code><br> assuming the shown URL, user email and password. (See <a href="../adminReadingsImport/#sampleFiles">admin reading sample files</a> for more information on URL, email and password.) You need to reload the OED web page so your browser is aware of the new meters but you will get an empty graphic if used since they don't have any data.<pre>
        name,ipaddress,enabled,displayable,type,timezone,gps,identifier,note,area,cumulative,reset,reset start,reset end,gap,variation,duplicates,timesort,end only,reading,start time,end time
        Meter 1,,FALSE,TRUE,other,,,Student Dorm,This dorm has 20 students,13418,,,,,,,,,,,,
        Meter 2,,FALSE,TRUE,other,America/Halifax,"1.2, -3.4",Athletic facility,,,,,,,,,,,,,,
    </pre><h3>Return messages</h3><p>What follows are the common messages returned from a meter upload along with their meaning:<ul><li> <code>&lt;h1&gt;FAILURE&lt;/h1&gt;CSVPipelineError: Failed to upload meters due to internal OED Error: Meter name of pipe41 seems to exist when inserting new meters and got DB error of: duplicate key value violates unique constraint "meters_name_key"</code><br> This normally happens when the name (or similarly identifier) of the meter already exists. It may be the case that you wanted to update this meter but did not specify this.<li> <code>&lt;h1&gt;FAILURE&lt;/h1&gt;CSVPipelineError: Failed to upload meters due to internal OED Error: Meter name of pipe42 does not seem to exist with update for meters and got DB error of: No data returned from the query.</code><br> Request indicated to update meter(s) but at least one did not exist. All meters must exist on update.<li> <code>&lt;h1&gt;SUCCESS&lt;/h1&gt;Successfully inserted the meters.&lt;h1&gt;FAILURE&lt;/h1&gt;CSVPipelineError: Failed to upload meters due to internal OED Error: Meter name provided (pipe40) in request with update for meters but more than one meter in CSV so not processing</code><br> When you want to change a meter name you specify the name in the request as well as the CSV file. It then uses the name in the request to find the meter and the value in the CSV as the new meter name. However, you can only have a single meter in the CSV file for this to work. This indicates more than one meter was provided.<li>You can get a variety of error messages if the gzip is improperly set. These include "TypeError", "invalid message format" and others. This is because OED is incorrectly reading the CSV file and receives garbled information.</ul><h2 id="details">Details</h2><p id=newMeter>Note that for efficiency reasons and because it is uncommon for the meters to change, OED does not automatically recheck for new meters when doing graphing. If you add new meters, there are two ways to get them to be available for graphing:<ol><li>You can visit the <a href="../adminMeterViewing/">Meters viewing page</a> if logged in as an admin. This page works directly with meter information and it does recheck for updates. Once this is done, any new meters will also be available for graphing. This is the fastest/easiest way to do this.<li>You can refresh the web browser page with OED. This will cause it to return to the initial state with updated information. However, you will lose all unsaved changes along with any selected meters/graphics meaning you are restarting from scratch. This is probably only desireable if someone who is not an admin needs to see the meter changes right away.</ol></div></div></article></div></div><div id="up-to-top" class="row"><div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a></div></div><footer id="footer-content" class="bg-grau"><div id="footer"><div class="row"> <noscript><div class="alert-box warning "><p>Some aspect of this site will not work and others will work better if you enable JavaScript.</div></noscript></div><div class="row"><div class="medium-6 large-5 columns"><h5 class="shadow-black">About This Site</h5><p class="shadow-black"> The OED dashboard allows organization to acquire, archive, analyze and display energy/resource usage. <a href="https://openenergydashboard.org/features/">More âº</a></div><div class="small-6 medium-3 large-3 large-offset-1 columns"><h5 class="shadow-black">Services</h5><ul class="no-bullet shadow-black"><li > <a href="https://openenergydashboard.org/" title=""></a><li > <a href="https://openenergydashboard.org/contact/" title="Contact">Contact</a><li > <a href="https://openenergydashboard.org/sitemap.xml" title="Sitemap for Google Webmaster Tools">sitemap.xml</a></ul></div><div class="small-6 medium-3 large-3 columns"><ul class="no-bullet shadow-black"></ul></div></div></div><div id="subfooter"><nav class="row"><section id="subfooter-left" class="small-12 medium-6 columns credits"><p>Created by the OED team using <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> based on <a href="https://phlow.github.io/feeling-responsive/">Feeling Responsive</a>. This page is part of the Open Energy Dashboard and is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed with this file, you can obtain one at <a href="https://www.mozilla.org/en-US/MPL/2.0/" rel="nofollow">https://www.mozilla.org/en-US/MPL/2.0/</a>.</section><section id="subfooter-right" class="small-12 medium-6 columns"><ul class="inline-list social-icons"><li><a href="https://github.com/OpenEnergyDashboard/OED" target="_blank" class="icon-github" title="Code other repos..."></a></ul></section></nav></div></footer><script src="https://openenergydashboard.org/assets/js/javascript.min.js"></script>
