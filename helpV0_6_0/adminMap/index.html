<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Map Management Doc</title><link rel="stylesheet" type="text/css" href="https://openenergydashboard.org/assets/css/styles_feeling_responsive.css"> <script src="https://openenergydashboard.org/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <noscript><link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'> </noscript><meta name="description" content="Version V0.6.0 The latest version of this page is V0.8.0. The latest version of the documentation is V1.0.0. Documentation overview Admin documentation Information Overview Site Management Group Viewing Map Management Map Viewing Meter Viewing Site Settings Data Acquisition Data Acquisition Site Installation User documentation User help Documentation versions for this page V0.8.0 V0.7.0 V0.6.0 (current page) These features are only available to select people who oversee the OED site (called admins) so this information is not usually of interest to a general user. Overview See the map graphic page for general information on OED and maps. Note that unlike many systems, using maps in OED does not require any additional software nor the use of GIS. Instead, you load a graphical image you want to use as a map. This can be anything from a real map, a stylized graphic with buildings and features of interest to an arbitrary graphic. Once loaded, you calibrate this map by informing OED about a few GPS coordinates for items on the map. OED will automatically allow users to place meters on a graph as long as you have input the GPS data for that meter. OED allows sites to have as many maps as they wish and maps can overlap. For example, you could have maps with two different sites and a map that zooms in to show details of one of the sites. This greatly simplified system is based on a simple assumption that the map is flat. In actuality, the world is a sphere so that it is curved. However, over modest distances, it is effectively flat. This is why local maps don&#39;t appear warped but ones of the entire global make some areas look much larger than they really are. Since most maps involving a site are over very modest distances this works very well. If you want a large geographical area map then see circle placement below on making this work. Note that you can have different maps that are very far apart without any issue. It is only a single map covering a large area that causes issues. Usage If you click on the &quot;Maps&quot; button in the top, right of the main OED screen you will go to the maps page shown below. This shows the page when no maps are on the site. Click the blue &quot;Create a Map&quot; button to begin the process of uploading a map. You should now be on the page shown below. Click on the &quot;Browse ...&quot; button (highlighted with a blue box) to open a standard web browser pop up to select a file. Choose the graphical image of your map. Note the image can be of types JPEG or PNG (the file extension does not matter but the contents must be one of these two image types). OED will allow you to choose other types of files and tell you the upload is complete but you will find the file image does not appear on the next step. There are many programs/apps that will allow you to convert to one of these two types of graphical images. Once you have uploaded the map image, use the box immediately below (labeled &quot;Define a name for the map:&quot;) to name your map. Note this is the name that a user will see (it can be edited later). When you are ready, click the &quot;Save and continue&quot; button to complete this step. You should then see the confirmation popup shown below. Click &quot;OK&quot; to continue the process. You should now be on the map calibration page shown below. This page allows you to enter the GPS coordinates for places on the map so OED can map locations on the map to locations on the globe (world map). You should place your curser that will appear as a &quot;+&quot; symbol at the point on the map that you wish to enter the GPS coordinate for. As you move your mouse, you will see the x and y coordinates on the map grid which span from 300 in the x-direction to 500 in the y-direction. These can be less depending on the aspect ratio of your map since they might be clipped in one direction to make the map fit the grid coordinate system. In the figure below, the cursor was placed at grid coordinate (277, 461) and then the mouse was clicked. (Unfortunately the image cannot pick up the &quot;+&quot; where the cursor was located.) This point was chosen since we assume that in a real situation we knew the GPS coordinate for the top, right corner of the &quot;Swimming Pool&quot; building in the image. As shown in the figure above, when that point was clicked, a message appeared below the map (inside the blue box used for highlighting) that says &quot;input GPS coordinate that corresponds to the point: x: 277, y: 461 in this format -&gt; latitude,longitude&quot;. This confirms that the coordinate clicked was (277, 461). As the message states, you need to enter the GPS coordinate for this point on the map as a latitude, longitude pair separated by a comma. This is a common format for GPS coordinates but do not include parentheses when you enter the GPS value such as they are written above. You enter the GPS value in the box below this message. For this example, the GPS coordinate entered was 27.704475876832863, 85.31428805756381. The box where this was entered is inside the blue box used for highlighting as shown in the next figure. Once complete, you click the &quot;Submit&quot; button below the box for GPS (inside the blue box used for highlighting). This leads to the figure below. The text at the bottom of the web browser window, &quot;result: Need more points&quot; (highlighted with a blue box) indicates the result. It is stating that there are too few points to complete the calibration. OED needs a minimum of three points to calculate the error and possibly complete the calibration. Also note that the message will change the GPS value to &quot;undefined&quot; so it becomes &quot;input GPS coordinate that corresponds to the point: undefined in this format -&gt; latitude,longitude&quot; after you submit a point. This is to indicate that a new point has yet to be chosen. You now need to repeat the steps above to enter more calibration points. You can click anywhere on the map where you know the GPS coordinates. It is okay to click more than once to replace the point clicked with a new one as long as it is before you &quot;Submit&quot; the GPS value. See below for suggestions on points to use and how to get the GPS coordinates for points on the map. Once you have entered at least three calibration points, OED will give you an estimate of the overall calibration result (inside the blue box used for highlighting in the figure below). In this example, the result is &quot;result: x: 0.003% y: 0.007%&quot; (inside the blue box used for highlighting in the figure above). If you are satisfied with the result, you click the &quot;Save changes to database&quot; (inside the blue box used for highlighting). See below for a discussion of the Calibration Result. If at any time you want to begin the calibration process again, you can click the &quot;Restart&quot; button. If the calibration is a little worse than you want, you can try to add more points to improve the error but this is not guaranteed to work. Once you save the calibration, you are taken to the Admin Map Viewing page that is shown below for a single map. If you want users to be able to see the map then make sure &quot;Display Enabled&quot; is shown. It is best to verify that items are showing up in the correct places before you reveal the map to users. Note you can recalibrate a map from this page. Once you set the GPS of meters, you can see their values on the map. (See the map graphing page for more information.) If you find that the circles are not showing up at the desired points, then see the section on circle placement issues below. You can repeat this process for as many maps as you want. Choosing calibration points and finding the GPS value OED uses the distance between calibration points to determine the quality of the points (called the &quot;result&quot; above). Spreading the points around the map increases the distance between the points. This is more likely to lead to correct placement of points around the entire map. If possible this should be done but not if it means you cannot get accurate GPS values for each calibration point entered. You can determine the GPS value of the calibration points in any way you wish. A way that is often accurate and easy is to use an online mapping site that contains an image that allows you to locate the same points that are contained in the image you will use inside OED. You can then click on that point on the map to get the GPS value. While OED does not endorse any particular online map, a popular one is Google Maps. With this you can left click on any point on a map to reveal information about that point. The first one is the GPS coordinates. If you right click on the GPS coordinate it will copy it to your clipboard. You can then paste this value into the OED box to input GPS coordinates during the calibration steps described above. Another technique is to physically go to the point on the map and use a cell phone application that shows your current GPS location. Whatever technique you use, it is important to get accurate values so your calibration is of high quality. Calibration result OED gives a result that gives an idea of how far off the calibration points are from each other. This can give you an idea of how accurately OED will place circles on the map. For example, three calibration points were entered on the map above where each one was changed by +/- 5 in the fourth digit. Thus, 27.2 became either 26.15 (27.2 - 0.05) or 27.25 (27.2 + 0.05). Another example would be 2.7 would become either 2.605 (2.7 - 0.005) or 2.705 (2.7 + 0.005). This is a 5 part in 10,000 error or 0.05%. This lead to a result of &quot;result: x: 0.003% y: 0.007%&quot; which is a smaller percent error than the deviation of any x or y value (0.05%). This is the example used in the figure below. If you map circles that should be directly on &quot;Play Place&quot; and &quot;Theater&quot; you get the following. As shown, the circles are a little below the building but still clear about their placement. If we change so that the each value is +/- 0.1 then the result is much worse. This would mean that the GPS value is uncertain in the first decimal place so the error magnitude is the same for each point (not the percent). This means that the value 2.7 is either 2.8 or 2.6. The result is &quot;result: x: 299% y: 0.002%&quot;. The result of mapping is shown in the next figure where &quot;Play Place&quot; is now off the map. What should be noted is that modest percent errors (here 0.299%) in any coordinate is likely to lead to significant placement issues. When this happens, you need to recalibrate the map. There are many possible reasons that the calibration might be off and we discuss several now. First, it is easy to type in the wrong value for a point. If this happens then correctly reentering the calibration values again will fix the issue. Second, a value for a calibration point is wrong. While a similar result to the first issue, it means rechecking each point to see which one(s) might be off. Third, the accuracy of the points is too low. This requires using another technique to get the values. This can happen, for example, if the map you used to get the GPS coordinates has features placed at a different location than on the map you uploaded to OED. It could also happen because manually read GPS values (such as going to a place and using the value shown of your cell phone) are off. This is due to the inherent accuracy of the device in getting the GPS coordinate or standing in the correct location. While many issues can happen, the OED project found that getting the correct value is usually possible and led to good placement on the map. Getting a good calibration is the easiest way to place items on the map. See the next section for ideas on fixing poor placement of the circles on the map. Circle placement issues If you have done the best you can to calibrate the map but you still have circle(s) in the wrong place then you can manually fix them in the meter GPS value. OED only uses the GPS value for placing items on maps so fudging this value does not have other consequences or lead to incorrect results. The calibration for the map above was changed to deliberately enter errors by using four calibration points that were off (&quot;result x: 0.413% y: 0.019%&quot;). The next figure shows that &quot;Place Play&quot; is now a little low but way too far to the right and &quot;Theater&quot; is a little low and to the right. We begin by trying to fix &quot;Theater&quot; that is not as far off. Its actual GPS value is &quot;26.67, 25.0&quot;. By using the Admin Map Viewing page, the GPS value was changed. The fact that the circle is too low indicates the latitude needs to be larger and the fact that it is to the right indicates the longitude needs to be smaller. A handful of tries found a pretty good GPS value was (29.25, 12.0). Note that once you update a meter GPS, you can go the the map graphing page and it will show the updated location of any circles. Figuring out the needed change in this GPS value gave an idea of how much changing each value moved the circle. For &quot;Play Place&quot;, the actual GPS value was (41.67, 8.33). A few tries found that (42.2, -145) worked well. As expected the latitude only needed a small change but the longitude needed a significant change. The final result is show in the next figure. One thing to note is that this process is only done once when a new map is loaded. After that, any user will see the correct result. There are circumstance that can make it impossible to modify the meter GPS to get it in the correct place on the map. One is if the needed correction means the GPS value goes outside allowed values then OED will not allow the entry of this GPS value. This should only happen if the calibration is off significantly and should be rectified if the map calibration is redone with greater accuracy. A second is if two maps overlap in area so changing the GPS of a meter causes one map to be fine but another now has it in the wrong place. Proper calibration is the solution in this case. Details Current limitations OED version 0.6 introduced maps. To get them out to sites, we rolled them out even though they have some known limitations. We are actively working to implement the desired features and expect them to be available in upcoming releases. The known limitations are: You cannot place a group on a map. The planned changes will give admins the ability to give a group GPS coordinates and users to place on a map. The map graphic must be oriented so true north (not magnetic north) is perfectly vertical so there is no angle between the map image and true north. We plan to rectify this soon and allow a map with any rotation angle to true north."><meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ"><meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" ><link rel="canonical" href="https://openenergydashboard.org/helpV0_6_0/adminMap/"><meta property="og:title" content="Map Management Doc"><meta property="og:description" content="Version V0.6.0 The latest version of this page is V0.8.0. The latest version of the documentation is V1.0.0. Documentation overview Admin documentation Information Overview Site Management Group Viewing Map Management Map Viewing Meter Viewing Site Settings Data Acquisition Data Acquisition Site Installation User documentation User help Documentation versions for this page V0.8.0 V0.7.0 V0.6.0 (current page) These features are only available to select people who oversee the OED site (called admins) so this information is not usually of interest to a general user. Overview See the map graphic page for general information on OED and maps. Note that unlike many systems, using maps in OED does not require any additional software nor the use of GIS. Instead, you load a graphical image you want to use as a map. This can be anything from a real map, a stylized graphic with buildings and features of interest to an arbitrary graphic. Once loaded, you calibrate this map by informing OED about a few GPS coordinates for items on the map. OED will automatically allow users to place meters on a graph as long as you have input the GPS data for that meter. OED allows sites to have as many maps as they wish and maps can overlap. For example, you could have maps with two different sites and a map that zooms in to show details of one of the sites. This greatly simplified system is based on a simple assumption that the map is flat. In actuality, the world is a sphere so that it is curved. However, over modest distances, it is effectively flat. This is why local maps don&#39;t appear warped but ones of the entire global make some areas look much larger than they really are. Since most maps involving a site are over very modest distances this works very well. If you want a large geographical area map then see circle placement below on making this work. Note that you can have different maps that are very far apart without any issue. It is only a single map covering a large area that causes issues. Usage If you click on the &quot;Maps&quot; button in the top, right of the main OED screen you will go to the maps page shown below. This shows the page when no maps are on the site. Click the blue &quot;Create a Map&quot; button to begin the process of uploading a map. You should now be on the page shown below. Click on the &quot;Browse ...&quot; button (highlighted with a blue box) to open a standard web browser pop up to select a file. Choose the graphical image of your map. Note the image can be of types JPEG or PNG (the file extension does not matter but the contents must be one of these two image types). OED will allow you to choose other types of files and tell you the upload is complete but you will find the file image does not appear on the next step. There are many programs/apps that will allow you to convert to one of these two types of graphical images. Once you have uploaded the map image, use the box immediately below (labeled &quot;Define a name for the map:&quot;) to name your map. Note this is the name that a user will see (it can be edited later). When you are ready, click the &quot;Save and continue&quot; button to complete this step. You should then see the confirmation popup shown below. Click &quot;OK&quot; to continue the process. You should now be on the map calibration page shown below. This page allows you to enter the GPS coordinates for places on the map so OED can map locations on the map to locations on the globe (world map). You should place your curser that will appear as a &quot;+&quot; symbol at the point on the map that you wish to enter the GPS coordinate for. As you move your mouse, you will see the x and y coordinates on the map grid which span from 300 in the x-direction to 500 in the y-direction. These can be less depending on the aspect ratio of your map since they might be clipped in one direction to make the map fit the grid coordinate system. In the figure below, the cursor was placed at grid coordinate (277, 461) and then the mouse was clicked. (Unfortunately the image cannot pick up the &quot;+&quot; where the cursor was located.) This point was chosen since we assume that in a real situation we knew the GPS coordinate for the top, right corner of the &quot;Swimming Pool&quot; building in the image. As shown in the figure above, when that point was clicked, a message appeared below the map (inside the blue box used for highlighting) that says &quot;input GPS coordinate that corresponds to the point: x: 277, y: 461 in this format -&gt; latitude,longitude&quot;. This confirms that the coordinate clicked was (277, 461). As the message states, you need to enter the GPS coordinate for this point on the map as a latitude, longitude pair separated by a comma. This is a common format for GPS coordinates but do not include parentheses when you enter the GPS value such as they are written above. You enter the GPS value in the box below this message. For this example, the GPS coordinate entered was 27.704475876832863, 85.31428805756381. The box where this was entered is inside the blue box used for highlighting as shown in the next figure. Once complete, you click the &quot;Submit&quot; button below the box for GPS (inside the blue box used for highlighting). This leads to the figure below. The text at the bottom of the web browser window, &quot;result: Need more points&quot; (highlighted with a blue box) indicates the result. It is stating that there are too few points to complete the calibration. OED needs a minimum of three points to calculate the error and possibly complete the calibration. Also note that the message will change the GPS value to &quot;undefined&quot; so it becomes &quot;input GPS coordinate that corresponds to the point: undefined in this format -&gt; latitude,longitude&quot; after you submit a point. This is to indicate that a new point has yet to be chosen. You now need to repeat the steps above to enter more calibration points. You can click anywhere on the map where you know the GPS coordinates. It is okay to click more than once to replace the point clicked with a new one as long as it is before you &quot;Submit&quot; the GPS value. See below for suggestions on points to use and how to get the GPS coordinates for points on the map. Once you have entered at least three calibration points, OED will give you an estimate of the overall calibration result (inside the blue box used for highlighting in the figure below). In this example, the result is &quot;result: x: 0.003% y: 0.007%&quot; (inside the blue box used for highlighting in the figure above). If you are satisfied with the result, you click the &quot;Save changes to database&quot; (inside the blue box used for highlighting). See below for a discussion of the Calibration Result. If at any time you want to begin the calibration process again, you can click the &quot;Restart&quot; button. If the calibration is a little worse than you want, you can try to add more points to improve the error but this is not guaranteed to work. Once you save the calibration, you are taken to the Admin Map Viewing page that is shown below for a single map. If you want users to be able to see the map then make sure &quot;Display Enabled&quot; is shown. It is best to verify that items are showing up in the correct places before you reveal the map to users. Note you can recalibrate a map from this page. Once you set the GPS of meters, you can see their values on the map. (See the map graphing page for more information.) If you find that the circles are not showing up at the desired points, then see the section on circle placement issues below. You can repeat this process for as many maps as you want. Choosing calibration points and finding the GPS value OED uses the distance between calibration points to determine the quality of the points (called the &quot;result&quot; above). Spreading the points around the map increases the distance between the points. This is more likely to lead to correct placement of points around the entire map. If possible this should be done but not if it means you cannot get accurate GPS values for each calibration point entered. You can determine the GPS value of the calibration points in any way you wish. A way that is often accurate and easy is to use an online mapping site that contains an image that allows you to locate the same points that are contained in the image you will use inside OED. You can then click on that point on the map to get the GPS value. While OED does not endorse any particular online map, a popular one is Google Maps. With this you can left click on any point on a map to reveal information about that point. The first one is the GPS coordinates. If you right click on the GPS coordinate it will copy it to your clipboard. You can then paste this value into the OED box to input GPS coordinates during the calibration steps described above. Another technique is to physically go to the point on the map and use a cell phone application that shows your current GPS location. Whatever technique you use, it is important to get accurate values so your calibration is of high quality. Calibration result OED gives a result that gives an idea of how far off the calibration points are from each other. This can give you an idea of how accurately OED will place circles on the map. For example, three calibration points were entered on the map above where each one was changed by +/- 5 in the fourth digit. Thus, 27.2 became either 26.15 (27.2 - 0.05) or 27.25 (27.2 + 0.05). Another example would be 2.7 would become either 2.605 (2.7 - 0.005) or 2.705 (2.7 + 0.005). This is a 5 part in 10,000 error or 0.05%. This lead to a result of &quot;result: x: 0.003% y: 0.007%&quot; which is a smaller percent error than the deviation of any x or y value (0.05%). This is the example used in the figure below. If you map circles that should be directly on &quot;Play Place&quot; and &quot;Theater&quot; you get the following. As shown, the circles are a little below the building but still clear about their placement. If we change so that the each value is +/- 0.1 then the result is much worse. This would mean that the GPS value is uncertain in the first decimal place so the error magnitude is the same for each point (not the percent). This means that the value 2.7 is either 2.8 or 2.6. The result is &quot;result: x: 299% y: 0.002%&quot;. The result of mapping is shown in the next figure where &quot;Play Place&quot; is now off the map. What should be noted is that modest percent errors (here 0.299%) in any coordinate is likely to lead to significant placement issues. When this happens, you need to recalibrate the map. There are many possible reasons that the calibration might be off and we discuss several now. First, it is easy to type in the wrong value for a point. If this happens then correctly reentering the calibration values again will fix the issue. Second, a value for a calibration point is wrong. While a similar result to the first issue, it means rechecking each point to see which one(s) might be off. Third, the accuracy of the points is too low. This requires using another technique to get the values. This can happen, for example, if the map you used to get the GPS coordinates has features placed at a different location than on the map you uploaded to OED. It could also happen because manually read GPS values (such as going to a place and using the value shown of your cell phone) are off. This is due to the inherent accuracy of the device in getting the GPS coordinate or standing in the correct location. While many issues can happen, the OED project found that getting the correct value is usually possible and led to good placement on the map. Getting a good calibration is the easiest way to place items on the map. See the next section for ideas on fixing poor placement of the circles on the map. Circle placement issues If you have done the best you can to calibrate the map but you still have circle(s) in the wrong place then you can manually fix them in the meter GPS value. OED only uses the GPS value for placing items on maps so fudging this value does not have other consequences or lead to incorrect results. The calibration for the map above was changed to deliberately enter errors by using four calibration points that were off (&quot;result x: 0.413% y: 0.019%&quot;). The next figure shows that &quot;Place Play&quot; is now a little low but way too far to the right and &quot;Theater&quot; is a little low and to the right. We begin by trying to fix &quot;Theater&quot; that is not as far off. Its actual GPS value is &quot;26.67, 25.0&quot;. By using the Admin Map Viewing page, the GPS value was changed. The fact that the circle is too low indicates the latitude needs to be larger and the fact that it is to the right indicates the longitude needs to be smaller. A handful of tries found a pretty good GPS value was (29.25, 12.0). Note that once you update a meter GPS, you can go the the map graphing page and it will show the updated location of any circles. Figuring out the needed change in this GPS value gave an idea of how much changing each value moved the circle. For &quot;Play Place&quot;, the actual GPS value was (41.67, 8.33). A few tries found that (42.2, -145) worked well. As expected the latitude only needed a small change but the longitude needed a significant change. The final result is show in the next figure. One thing to note is that this process is only done once when a new map is loaded. After that, any user will see the correct result. There are circumstance that can make it impossible to modify the meter GPS to get it in the correct place on the map. One is if the needed correction means the GPS value goes outside allowed values then OED will not allow the entry of this GPS value. This should only happen if the calibration is off significantly and should be rectified if the map calibration is redone with greater accuracy. A second is if two maps overlap in area so changing the GPS of a meter causes one map to be fine but another now has it in the wrong place. Proper calibration is the solution in this case. Details Current limitations OED version 0.6 introduced maps. To get them out to sites, we rolled them out even though they have some known limitations. We are actively working to implement the desired features and expect them to be available in upcoming releases. The known limitations are: You cannot place a group on a map. The planned changes will give admins the ability to give a group GPS coordinates and users to place on a map. The map graphic must be oriented so true north (not magnetic north) is perfectly vertical so there is no angle between the map image and true north. We plan to rectify this soon and allow a map with any rotation angle to true north."><meta property="og:url" content="https://openenergydashboard.org/helpV0_6_0/adminMap/"><meta property="og:locale" content="en_EN"><meta property="og:type" content="website"><meta property="og:site_name" content="Open Energy Dashboard"><link rel="icon" sizes="32x32" href="https://openenergydashboard.org/assets/img/OEDIcon22x32.png"><link rel="icon" sizes="192x192" href="https://openenergydashboard.org/assets/img/OEDIcon192x274.png"><body id="top-of-page" class="page-fullwidth"><div id="navigation" class="sticky"><nav class="top-bar" role="navigation" data-topbar data-options="scrolltop: false"><ul class="title-area"><li class="name"><h1 class="hide-for-large-up"><a href="https://openenergydashboard.org/" class="icon-tree"> Open Energy Dashboard</a></h1><li class="toggle-topbar toggle-topbar-click menu-icon"><a><span>Nav</span></a></ul><section class="top-bar-section"><ul class="left"><li><a href="https://openenergydashboard.org/">home</a><li class="divider"><li class="has-dropdown"> <a href="https://openenergydashboard.org/features/">features</a><ul class="dropdown"><li><a href="https://openenergydashboard.org/features/">features by type</a><li><a href="https://openenergydashboard.org/useAcademic/">features by academic use</a></ul><li class="divider"><li class="has-dropdown"> <a href="https://openenergydashboard.org/helpV1_0_0/user/">Documentation</a><ul class="dropdown"><li><a href="https://openenergydashboard.org/helpV1_0_0/user/">oed version 1.0.0</a><li><a href="https://openenergydashboard.org/helpV0_8_0/user/">oed version 0.8.0</a><li><a href="https://openenergydashboard.org/helpV0_7_0/user/">oed version 0.7.0</a><li><a href="https://openenergydashboard.org/helpV0_6_0/user/">oed version 0.6.0</a></ul><li class="divider"><li><a href="https://openenergydashboard.org/use/">Adopting</a><li class="divider"><li class="has-dropdown"> <a href="https://openenergydashboard.org/news/">info</a><ul class="dropdown"><li><a href="https://openenergydashboard.org/news/">news</a><li><a href="https://openenergydashboard.org/principles/">project principles</a><li><a href="https://openenergydashboard.org/free/">free &amp; maintained</a><li><a href="https://openenergydashboard.org/mission/">mission</a><li><a href="https://openenergydashboard.org/why/">why exists</a><li><a href="https://openenergydashboard.org/projectInfo/">project information pages &amp; license</a><li><a href="https://openenergydashboard.org/name/">why OED name, logo &amp; some history</a></ul><li class="divider"></ul><ul class="right"><li class="divider"><li><a href="https://openenergydashboard.org/search/">Search</a><li class="divider"><li><a href="https://openenergydashboard.org/contact/">Contact</a><li class="divider"><li><a href="https://openenergydashboard.org/developer/developer/">developer docs</a><li class="divider"><li class="has-dropdown"> <a href="https://openenergydashboard.org/involved/">get involved</a><ul class="dropdown"><li><a href="https://openenergydashboard.org/internship/">becoming a developer</a><li><a href="https://openenergydashboard.org/studentExperience/">student experience</a></ul></ul></section></nav></div><div id="masthead-no-image-header"><div class="row"><div class="small-6 small-centered columns"> <a id="logo" title="Open Energy Dashboard – A Free, Open Source Energy/Resource Dashboard"> <img src="https://openenergydashboard.org/assets/img/logoHelp.png" alt="Open Energy Dashboard – A Free, Open Source Energy/Resource Dashboard"> </a></div></div></div><nav class="breadcrumbs" role="menubar" aria-label="breadcrumbs"> <a href="https://openenergydashboard.org/">Start</a> <a href="https://openenergydashboard.org/helpV0_6_0/">helpV0_6_0</a> <a class="current">Map Management</a></nav><div class="row t15"><div class="medium-12 columns"><article><header><p class="subheadline">OED Documentation<h1>Map Management</h1></header><div class="row"><p>Version V0.6.0<div class="alert-box info "><p>The latest version of this page is <a href="https://openenergydashboard.org/helpV0_8_0/adminMap/">V0.8.0</a>. The latest version of the documentation is <a href="https://openenergydashboard.org/helpV1_0_0/admin/">V1.0.0</a>.</div><div class="medium-4 medium-push-8 columns" markdown="1"><div class="panel radius" markdown="1"><div style="list-style: none;" class="side-nav"><h4><a href='../admin/'>Documentation overview</a></h4><div><h5>Admin documentation</h5><div style="padding-left: 1em;"><h6>Information</h6><div style="padding-left: 1em;"> <a href="https://openenergydashboard.org/helpV0_6_0/admin/">Overview</a></br></div></div><div style="padding-left: 1em;"><h6>Site Management</h6><div style="padding-left: 1em;"> <a href="https://openenergydashboard.org/helpV0_6_0/adminGroupViewing/">Group Viewing</a></br> <a href="https://openenergydashboard.org/helpV0_6_0/adminMap/">Map Management</a></br> <a href="https://openenergydashboard.org/helpV0_6_0/adminMapViewing/">Map Viewing</a></br> <a href="https://openenergydashboard.org/helpV0_6_0/adminMeterViewing/">Meter Viewing</a></br> <a href="https://openenergydashboard.org/helpV0_6_0/adminPreferences/">Site Settings</a></br></div></div><div style="padding-left: 1em;"><h6>Data Acquisition</h6><div style="padding-left: 1em;"> <a href="https://openenergydashboard.org/helpV0_6_0/adminDataAcquisition/">Data Acquisition</a></br></div></div><div style="padding-left: 1em;"><h6>Site Installation</h6><div style="padding-left: 1em;"></div></div><h5>User documentation</h5><div style="padding-left: 1em;"> <a href="https://openenergydashboard.org/helpV0_6_0/adminMap/../user/">User help</a></br></div><h5>Documentation versions for this page</h5><div style="padding-left: 1em;"> <a href="../../helpV0_8_0/adminMap/">V0.8.0</a></br> <a href="../../helpV0_7_0/adminMap/">V0.7.0</a></br> V0.6.0 (current page)</br></div></div></div></div></div><div class="medium-8 medium-pull-4 columns" markdown="1"><div class="alert-box info "><p>These features are only available to select people who oversee the OED site (called admins) so this information is not usually of interest to a general user.</div><h2 id="overview">Overview</h2><p>See the <a href="../mapGraphic/">map graphic page</a> for general information on OED and maps. Note that unlike many systems, using maps in OED does not require any additional software nor the use of GIS. Instead, you load a graphical image you want to use as a map. This can be anything from a real map, a stylized graphic with buildings and features of interest to an arbitrary graphic. Once loaded, you calibrate this map by informing OED about a few GPS coordinates for items on the map. OED will automatically allow users to place meters on a graph as long as you have <a href="../adminMeterViewing/">input the GPS data for that meter</a>. OED allows sites to have as many maps as they wish and maps can overlap. For example, you could have maps with two different sites and a map that zooms in to show details of one of the sites.<p>This greatly simplified system is based on a simple assumption that the map is flat. In actuality, the world is a sphere so that it is curved. However, over modest distances, it is effectively flat. This is why local maps don't appear warped but ones of the entire global make some areas look much larger than they really are. Since most maps involving a site are over very modest distances this works very well. If you want a large geographical area map then see <a href="#circlePlacementIssues">circle placement below</a> on making this work. Note that you can have different maps that are very far apart without any issue. It is only a single map covering a large area that causes issues.<h2 id="usage">Usage</h2><p>If you click on the "Maps" button in the top, right of the main OED screen you will go to the maps page shown below. This shows the page when no maps are on the site. Click the blue "Create a Map" button to begin the process of uploading a map. <img alt="admin map page without maps" src="../images/OEDAdminMapViewingEmpty.png"><p>You should now be on the page shown below. Click on the "Browse ..." button (highlighted with a blue box) to open a standard web browser pop up to select a file. Choose the graphical image of your map. Note the image can be of types JPEG or PNG (the file extension does not matter but the contents must be one of these two image types). OED will allow you to choose other types of files and tell you the upload is complete but you will find the file image does not appear on the next step. There are many programs/apps that will allow you to convert to one of these two types of graphical images. Once you have uploaded the map image, use the box immediately below (labeled "Define a name for the map:") to name your map. Note this is the name that a user will see (it can be edited later). When you are ready, click the "Save and continue" button to complete this step. <img alt="admin map loading page" src="../images/OEDAdminLoadMap.png"><p>You should then see the confirmation popup shown below. Click "OK" to continue the process. <img alt="admin map loading completion popup" src="../images/OEDAdminMapUploadComplete.png" style="width: 20vw; min-width: 250px;"><p>You should now be on the map calibration page shown below. This page allows you to enter the GPS coordinates for places on the map so OED can map locations on the map to locations on the globe (world map). You should place your curser that will appear as a "+" symbol at the point on the map that you wish to enter the GPS coordinate for. As you move your mouse, you will see the x and y coordinates on the map grid which span from 300 in the x-direction to 500 in the y-direction. These can be less depending on the aspect ratio of your map since they might be clipped in one direction to make the map fit the grid coordinate system. In the figure below, the cursor was placed at grid coordinate (277, 461) and then the mouse was clicked. (Unfortunately the image cannot pick up the "+" where the cursor was located.) This point was chosen since we assume that in a real situation we knew the GPS coordinate for the top, right corner of the "Swimming Pool" building in the image. <img alt="admin map calibration point entry" src="../images/OEDAdminMapCalibrationStepOne.png"><p>As shown in the figure above, when that point was clicked, a message appeared below the map (inside the blue box used for highlighting) that says "input GPS coordinate that corresponds to the point: x: 277, y: 461 in this format -> latitude,longitude". This confirms that the coordinate clicked was (277, 461). As the message states, you need to enter the GPS coordinate for this point on the map as a latitude, longitude pair separated by a comma. This is a common format for GPS coordinates but do not include parentheses when you enter the GPS value such as they are written above. You enter the GPS value in the box below this message. For this example, the GPS coordinate entered was 27.704475876832863, 85.31428805756381. The box where this was entered is inside the blue box used for highlighting as shown in the next figure. <img alt="admin map GPS entry for a calibration point" src="../images/OEDAdminMapCalibrationStepTwo.png"><p>Once complete, you click the "Submit" button below the box for GPS (inside the blue box used for highlighting). This leads to the figure below. The text at the bottom of the web browser window, "result: Need more points" (highlighted with a blue box) indicates the result. It is stating that there are too few points to complete the calibration. OED needs a minimum of three points to calculate the error and possibly complete the calibration. Also note that the message will change the GPS value to "undefined" so it becomes "input GPS coordinate that corresponds to the point: undefined in this format -> latitude,longitude" after you submit a point. This is to indicate that a new point has yet to be chosen. <img alt="admin map showing need more calibration points" src="../images/OEDAdminMapCalibrationStepThree.png"><p>You now need to repeat the steps above to enter more calibration points. You can click anywhere on the map where you know the GPS coordinates. It is okay to click more than once to replace the point clicked with a new one as long as it is before you "Submit" the GPS value. See below for <a href="#calibrationPoints">suggestions on points to use and how to get the GPS coordinates</a> for points on the map. Once you have entered at least three calibration points, OED will give you an estimate of the overall calibration result (inside the blue box used for highlighting in the figure below). <img alt="admin map showing result of current calibration points" src="../images/OEDAdminMapCalibrationStepFour.png"><p>In this example, the result is "result: x: 0.003% y: 0.007%" (inside the blue box used for highlighting in the figure above). If you are satisfied with the result, you click the "Save changes to database" (inside the blue box used for highlighting). See below for a discussion of the <a href="#calibrationResult">Calibration Result</a>. If at any time you want to begin the calibration process again, you can click the "Restart" button. If the calibration is a little worse than you want, you can try to add more points to improve the error but this is not guaranteed to work. Once you save the calibration, you are taken to the <a href="../adminMapViewing/">Admin Map Viewing</a> page that is shown below for a single map. If you want users to be able to see the map then make sure "Display Enabled" is shown. It is best to verify that items are showing up in the correct places before you reveal the map to users. Note you can recalibrate a map from this page. <img alt="admin map viewing page after calibration" src="../images/OEDAdminMapViewingAfterCalibration.png"><p>Once you set the GPS of meters, you can see their values on the map. (See the <a href="../mapGraphic/">map graphing</a> page for more information.) If you find that the circles are not showing up at the desired points, then see the section on <a href="#circlePlacementIssues">circle placement issues</a> below.<p>You can repeat this process for as many maps as you want.<h3 id="calibrationPoints">Choosing calibration points and finding the GPS value</h3><p>OED uses the distance between calibration points to determine the quality of the points (called the "result" above). Spreading the points around the map increases the distance between the points. This is more likely to lead to correct placement of points around the entire map. If possible this should be done but not if it means you cannot get accurate GPS values for each calibration point entered.<p>You can determine the GPS value of the calibration points in any way you wish. A way that is often accurate and easy is to use an online mapping site that contains an image that allows you to locate the same points that are contained in the image you will use inside OED. You can then click on that point on the map to get the GPS value. While OED does not endorse any particular online map, a popular one is Google Maps. With this you can left click on any point on a map to reveal information about that point. The first one is the GPS coordinates. If you right click on the GPS coordinate it will copy it to your clipboard. You can then paste this value into the OED box to input GPS coordinates during the calibration steps described above. Another technique is to physically go to the point on the map and use a cell phone application that shows your current GPS location. Whatever technique you use, it is important to get accurate values so your calibration is of high quality.<h3 id="calibrationResult">Calibration result</h3><p>OED gives a result that gives an idea of how far off the calibration points are from each other. This can give you an idea of how accurately OED will place circles on the map. For example, three calibration points were entered on the map above where each one was changed by +/- 5 in the fourth digit. Thus, 27.2 became either 26.15 (27.2 - 0.05) or 27.25 (27.2 + 0.05). Another example would be 2.7 would become either 2.605 (2.7 - 0.005) or 2.705 (2.7 + 0.005). This is a 5 part in 10,000 error or 0.05%. This lead to a result of "result: x: 0.003% y: 0.007%" which is a smaller percent error than the deviation of any x or y value (0.05%). This is the example used in the figure below. If you map circles that should be directly on "Play Place" and "Theater" you get the following. <img alt="admin map small calibration error result" src="../images/OEDAdminMapResultOne.png"><p>As shown, the circles are a little below the building but still clear about their placement. If we change so that the each value is +/- 0.1 then the result is much worse. This would mean that the GPS value is uncertain in the first decimal place so the error magnitude is the same for each point (not the percent). This means that the value 2.7 is either 2.8 or 2.6. The result is "result: x: 299% y: 0.002%". The result of mapping is shown in the next figure where "Play Place" is now off the map. <img alt="admin map larger calibration error result" src="../images/OEDAdminMapResultTwo.png"><p>What should be noted is that modest percent errors (here 0.299%) in any coordinate is likely to lead to significant placement issues. When this happens, you need to recalibrate the map.<p>There are many possible reasons that the calibration might be off and we discuss several now. First, it is easy to type in the wrong value for a point. If this happens then correctly reentering the calibration values again will fix the issue. Second, a value for a calibration point is wrong. While a similar result to the first issue, it means rechecking each point to see which one(s) might be off. Third, the accuracy of the points is too low. This requires using another technique to get the values. This can happen, for example, if the map you used to get the GPS coordinates has features placed at a different location than on the map you uploaded to OED. It could also happen because manually read GPS values (such as going to a place and using the value shown of your cell phone) are off. This is due to the inherent accuracy of the device in getting the GPS coordinate or standing in the correct location. While many issues can happen, the OED project found that getting the correct value is usually possible and led to good placement on the map. Getting a good calibration is the easiest way to place items on the map. See the next section for ideas on fixing poor placement of the circles on the map.<h3 id="circlePlacementIssues">Circle placement issues</h3><p>If you have done the best you can to calibrate the map but you still have circle(s) in the wrong place then you can manually fix them in the meter GPS value. OED only uses the GPS value for placing items on maps so fudging this value does not have other consequences or lead to incorrect results. The calibration for the map above was changed to deliberately enter errors by using four calibration points that were off ("result x: 0.413% y: 0.019%"). The next figure shows that "Place Play" is now a little low but way too far to the right and "Theater" is a little low and to the right. <img alt="admin map larger calibration error result" src="../images/OEDAdminMapCalibrationOff.png"><p>We begin by trying to fix "Theater" that is not as far off. Its actual GPS value is "26.67, 25.0". By using the <a href="../adminMapViewing/">Admin Map Viewing</a> page, the GPS value was changed. The fact that the circle is too low indicates the latitude needs to be larger and the fact that it is to the right indicates the longitude needs to be smaller. A handful of tries found a pretty good GPS value was (29.25, 12.0). Note that once you update a meter GPS, you can go the the map graphing page and it will show the updated location of any circles. Figuring out the needed change in this GPS value gave an idea of how much changing each value moved the circle. For "Play Place", the actual GPS value was (41.67, 8.33). A few tries found that (42.2, -145) worked well. As expected the latitude only needed a small change but the longitude needed a significant change. The final result is show in the next figure. <img alt="admin map larger calibration error fixed result" src="../images/OEDAdminMapCalibrationFixed.png"><p>One thing to note is that this process is only done once when a new map is loaded. After that, any user will see the correct result.<p>There are circumstance that can make it impossible to modify the meter GPS to get it in the correct place on the map. One is if the needed correction means the GPS value goes outside allowed values then OED will not allow the entry of this GPS value. This should only happen if the calibration is off significantly and should be rectified if the map calibration is redone with greater accuracy. A second is if two maps overlap in area so changing the GPS of a meter causes one map to be fine but another now has it in the wrong place. Proper calibration is the solution in this case.<h2 id="details">Details</h2><h3>Current limitations</h3><p>OED version 0.6 introduced maps. To get them out to sites, we rolled them out even though they have some known limitations. We are actively working to implement the desired features and expect them to be available in upcoming releases. The known limitations are:<ul><li>You cannot place a group on a map. The planned changes will give admins the ability to give a group GPS coordinates and users to place on a map.<li>The map graphic must be oriented so true north (not magnetic north) is perfectly vertical so there is no angle between the map image and true north. We plan to rectify this soon and allow a map with any rotation angle to true north.</ul></div></div></article></div></div><div id="up-to-top" class="row"><div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a></div></div><footer id="footer-content" class="bg-grau"><div id="footer"><div class="row"> <noscript><div class="alert-box warning "><p>Some aspect of this site will not work and others will work better if you enable JavaScript.</div></noscript></div><div class="row"><div class="medium-6 large-5 columns"><h5 class="shadow-black">About This Site</h5><p class="shadow-black"> The OED dashboard allows organization to acquire, archive, analyze and display energy/resource usage. <a href="https://openenergydashboard.org/features/">More ›</a></div><div class="small-6 medium-3 large-3 large-offset-1 columns"><h5 class="shadow-black">Services</h5><ul class="no-bullet shadow-black"><li > <a href="https://openenergydashboard.org/" title=""></a><li > <a href="https://openenergydashboard.org/contact/" title="Contact">Contact</a><li > <a href="https://openenergydashboard.org/sitemap.xml" title="Sitemap for Google Webmaster Tools">sitemap.xml</a></ul></div><div class="small-6 medium-3 large-3 columns"><ul class="no-bullet shadow-black"></ul></div></div></div><div id="subfooter"><nav class="row"><section id="subfooter-left" class="small-12 medium-6 columns credits"><p>Created by the OED team using <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> based on <a href="https://phlow.github.io/feeling-responsive/">Feeling Responsive</a>. This page is part of the Open Energy Dashboard and is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed with this file, you can obtain one at <a href="https://www.mozilla.org/en-US/MPL/2.0/" rel="nofollow">https://www.mozilla.org/en-US/MPL/2.0/</a>.</section><section id="subfooter-right" class="small-12 medium-6 columns"><ul class="inline-list social-icons"><li><a href="https://github.com/OpenEnergyDashboard/OED" target="_blank" class="icon-github" title="Code other repos..."></a></ul></section></nav></div></footer><script src="https://openenergydashboard.org/assets/js/javascript.min.js"></script>
